<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>ETC1010 - 5510: Introduction to Data Analysis</title>
    <meta charset="utf-8" />
    <meta name="author" content="Patricia Menéndez" />
    <script src="libs/header-attrs-2.10/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/ninjutsu.css" rel="stylesheet" />
    <!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
    -->
    <link rel="icon" href="images/favicon.ico"  type='image/x-icon'/>    
    <link rel="stylesheet" href="assets/animate.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-logo.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-brand.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-fonts.css" type="text/css" />
    <link rel="stylesheet" href="assets/styles.css" type="text/css" />
    <link rel="stylesheet" href="assets/custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




background-image: url(images/daniel-olah-pCcGpVsOHoo-unsplash.jpg)
background-size: cover
class: hide-slide-number split-70 title-slide
count: false

.column.shade_black[.content[

&lt;br&gt;

# .monash-white.outline-text[ETC1010 - 5510: Introduction to Data Analysis]

&lt;h2 class="monash-white outline-text" style="font-size: 30pt!important;"&gt;Week 3&lt;/h2&gt;

&lt;br&gt;

&lt;h2 style="font-weight:900!important;"&gt;Week of Grammar of Graphics and Dates&lt;/h2&gt;

.bottom_abs.width100[

Lecturer: *Patricia Menéndez*

Department of Econometrics and Business Statistics




&lt;br&gt;
]


]]



&lt;div class="column transition monash-m-new delay-1s" style="clip-path:url(#swipe__clip-path);"&gt;
&lt;div class="background-image" style="background-image:url('images/large.png');background-position: center;background-size:cover;"&gt;
&lt;svg class="clip-svg absolute"&gt;
&lt;defs&gt;
&lt;clipPath id="swipe__clip-path" clipPathUnits="objectBoundingBox"&gt;
&lt;polygon points="0.5745 0, 0.5 0.33, 0.42 0, 0 0, 0 1, 0.27 1, 0.27 0.59, 0.37 1, 0.634 1, 0.736 0.59, 0.736 1, 1 1, 1 0, 0.5745 0" /&gt;
&lt;/clipPath&gt;
&lt;/defs&gt;	
&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;






---
# Questions/Comments/Suggestions

&lt;img src="images/rhythm-goyal-_-Ofoh09q_o-unsplash.jpg" width="80%" style="display: block; margin: auto;" /&gt;
 Photo: Rhythm Goyal for  Unsplash.
---
# Recap: Week 2

&lt;br&gt;&lt;br&gt;
- Tidy Data
- Data wrangling
- Different examples of data wrangling
- Good coding practices
- Assignment 1: released at the end of last week


---

# Week 3: Outline
&lt;br&gt;&lt;br&gt;
- Going from tidy data to a data plot, using the grammar of graphics
- Mapping of variables from the data to graphical elements
- Using different geoms
- Working with dates
- Constructing graphics with dates
- Briefly talk about the assignment








---
# Intuition: The trick of making graphs 
&lt;br&gt;&lt;br&gt;
.green[Using the grammar of graphics]

1. The data has to be stored in a dataframe --&gt; .purple[data]
2. We use the function .purple[ggplot] from .purple[ggplot2] R package

&lt;br&gt;&lt;br&gt;

```r
ggplot(data, aes(x, y)) +
  geom_line()
```


---
# Simple example: line plot
&lt;br&gt;&lt;br&gt;
.pull-left[

```r
data = data.frame( a= 1:10,
                   b = (1:10)*0.3)
head(data)
##   a   b
## 1 1 0.3
## 2 2 0.6
## 3 3 0.9
## 4 4 1.2
## 5 5 1.5
## 6 6 1.8
```
]
.pull-right[

```r
ggplot(data, aes(x = a, y = b)) +
* geom_line()
```

&lt;img src="Workshop1-Week3_files/figure-html/unnamed-chunk-4-1.png" width="216" style="display: block; margin: auto;" /&gt;
]

---
# Simple example: point plot
&lt;br&gt;&lt;br&gt;
.pull-left[

```r
data = data.frame( a= 1:10,
                   b = (1:10)*0.3)
head(data)
##   a   b
## 1 1 0.3
## 2 2 0.6
## 3 3 0.9
## 4 4 1.2
## 5 5 1.5
## 6 6 1.8
```
]

.pull-right[

```r
ggplot(data, aes(x = a, y = b)) +
* geom_point() +
* theme_bw()
```

&lt;img src="Workshop1-Week3_files/figure-html/unnamed-chunk-6-1.png" width="216" style="display: block; margin: auto;" /&gt;

[More on ggplot2 themes here](https://ggplot2.tidyverse.org/reference/ggtheme.html)
]





 
---
class: transition
# Let's unpack a bit.

---
# Data Visualization
&lt;br&gt;&lt;br&gt;
.blockquote[
"The simple graph has brought more information to the data analyst’s mind than any other device." — John Tukey
]

- The creation and study of the visual representation of data.
- Many tools for visualizing data (R is one of them)
- Many approaches/systems within R for making data visualizations (.green[**ggplot2**] is one of them, and that's what we're going to use).

---
# ggplot2 one of the  tidyverse packages

.left-code[
&lt;br&gt;
&lt;img src="images/ggplot2-part-of-tidyverse.png" width="80%" style="display: block; margin: auto;" /&gt;
]

.right-plot[
&lt;br&gt;
- **ggplot2** is tidyverse's data visualization package
- The `gg` in "ggplot2" stands for Grammar of Graphics
- It is inspired by the book .green[**Grammar of Graphics**] by Leland Wilkinson &lt;sup&gt;†&lt;/sup&gt;
- A grammar of graphics is a tool that enables us to concisely describe the components of a graphic
- (Source: [BloggoType](http://bloggotype.blogspot.com/2016/08/holiday-notes2-grammar-of-graphics.html))
]


---
# Example: Tuberculosis data

&lt;br&gt;&lt;br&gt;
.left-code[
The case notifications table From [WHO](http://www.who.int/tb/country/data/download/en/).

Data is .green[tidied] here, with only counts for Australia.

.green[Variables are displayed in the columns and cases in the rows]
]

.right-plot[

```r
tb_au
## # A tibble: 192 × 6
##    country   iso3   year count gender age  
##    &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;
##  1 Australia AUS    1997     8 m      15-24
##  2 Australia AUS    1998    11 m      15-24
##  3 Australia AUS    1999    13 m      15-24
##  4 Australia AUS    2000    16 m      15-24
##  5 Australia AUS    2001    23 m      15-24
##  6 Australia AUS    2002    15 m      15-24
##  7 Australia AUS    2003    14 m      15-24
##  8 Australia AUS    2004    18 m      15-24
##  9 Australia AUS    2005    32 m      15-24
## 10 Australia AUS    2006    33 m      15-24
## # … with 182 more rows
```
]



---
# Example: Tuberculosis data

&lt;br&gt;&lt;br&gt;

```r
glimpse(tb_au)
## Rows: 192
## Columns: 6
## $ country &lt;chr&gt; "Australia", "Australia", "Australia", "Australia", "Australia…
## $ iso3    &lt;chr&gt; "AUS", "AUS", "AUS", "AUS", "AUS", "AUS", "AUS", "AUS", "AUS",…
## $ year    &lt;dbl&gt; 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 20…
## $ count   &lt;dbl&gt; 8, 11, 13, 16, 23, 15, 14, 18, 32, 33, 30, 46, 30, 42, 38, 26,…
## $ gender  &lt;chr&gt; "m", "m", "m", "m", "m", "m", "m", "m", "m", "m", "m", "m", "m…
## $ age     &lt;chr&gt; "15-24", "15-24", "15-24", "15-24", "15-24", "15-24", "15-24",…
```


---
# Step by step: Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au)
```

]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-1-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]





---
#  Step by step: Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
*      aes(x = year,
*          y = count))
```

]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-2-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---
# Step by step: Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
       aes(x = year, 
           y = count))  +
* geom_point()
```

]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-3-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]



---
# Step by step: Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
       aes(x = year, 
           y = count))  +
  geom_point() +
* ylim(c(0,200))
```

]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-332-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]


---
# Step by step: Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
       aes(x = year, 
           y = count))  +
* geom_line()
```

]

.right-plot[

```r
ggplot(tb_au,
       aes(x = year, 
           y = count))  +
  geom_line() 
```

&lt;img src="Workshop1-Week3_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

This is **not a good plot!**

---
# Our first ggplot! 
&lt;br&gt;&lt;br&gt;
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; iso3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; year &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; count &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; gender &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; AUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1997 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15-24 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; AUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1998 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15-24 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; AUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15-24 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; AUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15-24 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; AUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2001 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15-24 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

Tuberculosis case notifications table From WHO.
---
# Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
       aes(x = year, 
           y = count))  +
* geom_col()
```
- In .purple[geom_col] .green[the heights of the bars represent values in the data]
- .purple[geom_col()] uses .purple[stat_identity()] .green[to count the data and it leaves the data as is.]
]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-4-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---
# Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
       aes(x = year, 
           y = count,
*          fill = gender))  +
  geom_col() 
```

]




.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-5-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]



Adding groups with different colors .purple[fill]!

---
# Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
       aes(x = year, 
           y = count,
           fill = gender))  + 
* geom_col(position = "fill")
```

.green[Adding groups with different colors] .purple[geom_col(position = "fill") ]

]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-6-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

&lt;br&gt;&lt;br&gt;&lt;br&gt;

**By adding** .purple[position = "fill"] we are turning our data into **frequencies/proportions!**



---
# Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
       aes(x = year, 
           y = count,
           fill = gender))  + 
  geom_col(position = "fill") +
* scale_fill_brewer(
*   palette = "Dark2"
*   )
```


]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-7-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

.green[Changing colors] .purple[ scale_fill_brewer(palette = "Dark2")]

---
# Our first ggplot!
&lt;br&gt;&lt;br&gt;
.left-code[

```r
library(ggplot2)
ggplot(tb_au,
       aes(x = year, 
           y = count,
           fill = gender))  + 
  geom_col(position = "fill") +
  scale_fill_brewer( 
    palette = "Dark2"
    ) +
* facet_wrap(~ age)
```
.green[Creating the same graph broken by different groups]
]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-8-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]


---
# Explanation
&lt;br&gt;&lt;br&gt;
- First argument provided is the name of the data, `tb_au`
- Variable mapping: .green[year is mapped to x], .green[count is mapped to y], .green[gender is mapped to colour], and .green[age is used to subset the data and make separate plots]
- The column geom is used, `geom_col`
- We are mostly interested in proportions between gender, over years, separately by age. The `position = "fill"` option in `geom_bar` sets the heights of the bars to be all at 100%. It ignores counts, and emphasizes the proportion of males and females.

---
# The "100% charts"
&lt;br&gt;&lt;br&gt;
.content-box-neutral[
- .purple[geom_bar]: .green[makes the height of the bar proportional to the number of cases in each group] (while in .purple[geom_col()] we need to add .purple[position = "fill"] to achieve the same result!
- .purple[stat]: It counts the number of cases at each x position (by default)
- .purple[position = "fill"]
- .purple[scale_fill_brewer(pallet = "Dark2)]: We can use [different palettes](https://ggplot2.tidyverse.org/reference/scale_brewer.html) 
]

 
[More info about geom_col and geom_bar here]()https://ggplot2.tidyverse.org/reference/geom_bar.html 
---
# The "100% charts"
&lt;br&gt;&lt;br&gt;

```r
ggplot(tb_au, aes(x = year, y = count, fill = gender)) +
* geom_bar(stat = "identity", position = "fill") +
* facet_grid(~ age) +
  scale_fill_brewer(palette="Dark2")
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-show-100pct-1.png" width="576" style="display: block; margin: auto;" /&gt;


- .purple[geom_bar]: makes the height of the bar proportional to the number of cases in each group. 
- .purple[stat]: It counts the number of cases at each x position (by default).
- .purple[position = "fill] shows relative proportions at each x by stacking the bars and then standardising each bar to have the same height.






---
class: transition left
# What do we learn?

&lt;br&gt;&lt;br&gt;
- Focus is on .green[**proportion**] in each category. 
- Across (almost) all ages, and years, the proportion of males having TB is higher than females
- .green[These proportions tend to be higher in the older age groups, for all years.]
- .green[**It is very important to think about what is the message that we want to convey with a figure!**]

---
# Recap: Code structure of ggplot
&lt;br&gt;&lt;br&gt;
- `ggplot()` is the main function
- Plots are constructed in layers
- Structure of code for plots can often be summarised as

```r
ggplot(data = [dataset], 
       mapping = aes(x = [x-variable], 
                     y = [y-variable])) +
   geom_xxx() +
   other options
```

---
# How to use ggplot
&lt;br&gt;&lt;br&gt;
- To use .purple[ggplot2] functions, first load .green[tidyverse] library.


```r
library(tidyverse)
```

- For help with the ggplot2, see [ggplot2.tidyverse.org](http://ggplot2.tidyverse.org/)

---
class: transition
# Let's look at some more options to emphasise different features

---
# Displaying the same graph for different groups:
&lt;br&gt;&lt;br&gt;
.left-code[

```r
ggplot(tb_au,
       aes(x = year, 
           y = count,
           fill = gender))  + 
  geom_col(position = "fill") +
  scale_fill_brewer( 
    palette = "Dark2"
    ) +
* facet_wrap(~ age)
```

]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/first-gg-9-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---
# Emphasizing different features with ggplot2
&lt;br&gt;&lt;br&gt;

```r
ggplot(tb_au, 
       aes(x = year, 
           y = count, 
           fill = gender))  + 
  geom_col(position = "fill") +
  scale_fill_brewer( palette = "Dark2") +
* facet_grid(~ age)
```

&lt;img src="Workshop1-Week3_files/figure-html/first-gg-10-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Emphasise ... ?
&lt;br&gt;&lt;br&gt;

```r
ggplot(tb_au, 
       aes(x = year, 
           y = count, 
           fill = gender))  + 
* geom_col() +
  scale_fill_brewer( palette = "Dark2") +
  facet_grid(~ age)
```

&lt;img src="Workshop1-Week3_files/figure-html/first-gg-11-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# What do we learn?

&lt;br&gt;&lt;br&gt;
- `, position = "fill"` was removed
- Focus is on .green[**counts**] in each .green[category]. 
- Differences across ages, and years, counts tend to be lower in middle age (45-64)
- 1999 saw a bit of an outbreak, in most age groups, with numbers doubling or tripling other years.
- Incidence has been increasing among younger age groups in recent years.

---
# Emphasise ... ?
&lt;br&gt;&lt;br&gt;

```r
ggplot(tb_au, 
       aes(x = year, 
           y = count, 
           fill = gender)) +
* geom_col(position = "dodge") +
  scale_fill_brewer(palette = "Dark2") +
  facet_grid(~ age)
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-side-by-side-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# What do we learn?
&lt;br&gt;&lt;br&gt;
- `, position="dodge"` is used in `geom_col`
- Focus is on **counts by gender**, predominantly male incidence.
- Incidence among males relative to females is from middle age on. 
- There is similar incidence between males and females in younger age groups.

---
# Separate bar charts
&lt;br&gt;&lt;br&gt;


```r
ggplot(tb_au, 
       aes(x = year, y = count, fill = gender)) +
  geom_col() +
  scale_fill_brewer(palette = "Dark2") +
* facet_grid(gender ~ age)
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-separate-1.png" width="576" style="display: block; margin: auto;" /&gt;

---
class: transition
# What do we learn?
&lt;br&gt;&lt;br&gt;
- `facet_grid(gender ~ age) +` .green[faceted by gender as well as age]
- note `facet_grid` vs `facet_wrap`
- Easier to focus separately on males and females.
- 1999 outbreak mostly affected males.
- Growing incidence in the 25-34 age group is still affecting females but seems to be have stablised for males.

---
# ~~Pie charts?~~ Rose Charts
&lt;br&gt;

```r
ggplot(tb_au, 
       aes(x = year, y = count, fill = gender)) +
  geom_col() +
  scale_fill_brewer(palette="Dark2") + 
  facet_grid(gender ~ age) +
* coord_polar() +
* theme(axis.text = element_blank())
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-rose-1.png" width="576" style="display: block; margin: auto;" /&gt;
&lt;br&gt;
[Polar coordinate system](https://en.wikipedia.org/wiki/Polar_coordinate_system)
is an alternative system to display points in a plane.

---
# What do we learn?

&lt;br&gt;&lt;br&gt;
- Bar charts in .green[polar coordinates] produce .green[rose charts]. 
- `coord_polar() +` plot is made in polar coordinates, rather than the default Cartesian coordinates
- .green[**Emphasizes the middle years as low incidence.**] 

---
# Not a good plot: Rainbow charts

&lt;br&gt;

```r
ggplot(tb_au, aes(x = 1, 
                  y = count, 
*                 fill = factor(year))) +
  geom_col(position = "fill") +
  facet_grid(gender ~ age) 
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-rainbow-1.png" width="50%" style="display: block; margin: auto;" /&gt;

- A single stacked bar, in each facet. 
-  .green[year is now mapped to colour] (that's what gives us the rainbow charts!)
- Pretty chart but .green[**not**] easy to interpret. 


---
# Not a good plot: (Actual) Pie charts
&lt;br&gt;

```r
ggplot(tb_au, aes(x = 1, y = count, fill = factor(year))) +
  geom_col(position = "fill") +
* facet_grid(gender ~ age) +
* coord_polar(theta = "y") +
  theme(axis.text = element_blank())
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-pie2-1.png" width="50%" style="display: block; margin: auto;" /&gt;

- `coord_polar(theta="y")`  is using the y variable to do the angles for the polar coordinates to give a pie chart.
- Pretty chart but .green[**not**] easy to interpret, or make comparisons across age groups. 

---
# Visualisation: the plot and the message
&lt;br&gt;&lt;br&gt;
.content-box-neutral[
- Different plots give different insight about the data.
- It is important to select the right plot to convey the message that we want to highlight.
- The grammar of graphics allow us to easily customize plots.
- The idea for any kind of plot is always the same: data, x and y axis, type of plot and then
other customization!
]

---

# References
&lt;br&gt;&lt;br&gt;
- [Chapter 3 of R for Data Science](https://r4ds.had.co.nz/data-visualisation.html)
- [Data made available from WHO](https://www.who.int/tb/country/data/download/en/)
- [Garret Aden Buie's gentle introduction to ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2/#1)
- [Mine Çetinkaya-Rundel's introduction to ggplot using star wars.](https://github.com/rstudio-education/datascience-box/tree/master/slides/u1_d02-data-and-viz)


---
background-image: url(images/allison-horst-ggplot2-masterpiece.png)
background-size: contain
background-position: 50% 50%
class: center, bottom, white

.right.purple.small[
Art by Allison Horst
]

---
class: transition

# Dealing with dates

- Needs care and it is actually a very important topic!



---
background-image: url(images/allison-horst-lubridate.png)
background-size: contain
background-position: 50% 50%
class: center, bottom, white
.right.purple.small[
Art by Allison Horst
]

---

# The challenges of working with dates and times
&lt;br&gt;&lt;br&gt;
- Conventional order of .green[day, month, year] is .green[**different across locations**]
  - Australia: DD-MM-YYYY
    - "21-02-2020"
  - America: MM-DD-YYYY
    - "02-21-2020"
  - [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601): YYYY-MM-DD
    - "2020-02-21"

---
background-image: url(https://imgs.xkcd.com/comics/iso_8601.png)
background-size: contain
background-position: 50% 50%
class: center, bottom, white


---
# The challenges of working with dates and times
&lt;br&gt;&lt;br&gt;
- Number of .green[units change:]
.content-box-neutral[
    - Years do not have the same number of days (leap years)
    - Months have different number of days. (January vs February vs September)
    - Not every minute has 60 seconds (leap seconds!)
]    
    
    
- .green[**Times are local**]. Where are you?
- .green[**Timezones!!!**]


---
# The challenges of working with dates and times
&lt;br&gt;&lt;br&gt;

- Representing time relative to it's type:
.content-box-neutral[
   - What day of the week is it? 
   - Day of the month? 
   - Week in the year?
   ]
- Years start on different days (Monday, Sunday, ...)

---
# The challenges of working with dates and times
&lt;br&gt;&lt;br&gt;
- Representing time relative to it's type:

.content-box-neutral[
  - Months could be numbers or names. (1st month, January)
  - Days could be numbers of names. (1st day....Sunday? Monday?)
  - Days and Months have abbreviations. (Mon, Tue, Jan, Feb)
]

- Time can be relative: 
.content-box-neutral[
  - How many days until we go on holidays?
  - How many working days?
]


---
# Lubridate
&lt;br&gt;&lt;br&gt;
.left-code[

- Simplifies date/time by helping you:
.content-box-neutral[
  - Parse values
  - Create new variables based on components like month, day, year
  - Do algebra on time
 ] 
]

.right-plot[

&lt;img src="images/lubridate.png" width="50%" style="display: block; margin: auto;" /&gt;
]

---

background-image: url(images/allison-horst-lubridate-ymd.png)
background-size: contain
background-position: 50% 50%
class: center, bottom, white
.right.purple.large[Art by Allison Horst]
---
class: transition

# Parsing dates &amp; time zones using `ymd()`

---
# `ymd()` can take a character input

&lt;br&gt;&lt;br&gt;

```r
ymd("20190810")   #Input is a character
## [1] "2019-08-10"
```
&lt;br&gt;
.green[year, month day]

---
# `ymd()` can also take other kinds of separators
&lt;br&gt;&lt;br&gt;

```r
ymd("2020-03-31")
## [1] "2020-03-31"
ymd("2020/03/31")
## [1] "2020-03-31"
```



```r
ymd("??2020-.-03//31---")
## [1] "2020-03-31"
```


.green[year, month, year]

---
# Change the letters, change the output
&lt;br&gt;&lt;br&gt;
# `mdy()` expects month, day, year. 



```r
mdy("03/31/2020")
## [1] "2020-03-31"
```

# `dmy()` expects day, month, year.



```r
dmy("03/31/2020")
## [1] NA
```
&lt;br&gt;
.green[day, month, year]

---
# Add a timezone

&lt;br&gt;&lt;br&gt;
If you add a time zone, what changes?


```r
ymd("2020-03-31", tz = "Australia/Melbourne")
## [1] "2020-03-31 AEDT"
```
&lt;br&gt;
.green[tz --&gt; time zone]

---
# What happens if you try to specify different time zones?

&lt;br&gt;&lt;br&gt;
.pull-left[


```r
ymd("2020-03-31", 
    tz = "Africa/Abidjan")
## [1] "2020-03-31 GMT"

ymd("2020-03-31", 
    tz = "America/Los_Angeles")
## [1] "2020-03-31 PDT"
```

]

.pull-right[

A list of acceptable time zones can be found [here](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) (google wiki timezone database)

]

---
# Timezones another way:

&lt;br&gt;&lt;br&gt;

```r
today()
## [1] "2021-08-31"
```



```r
today(tz = "America/Los_Angeles")
## [1] "2021-08-31"
```




```r
now()
## [1] "2021-08-31 20:03:07 AEST"
```




```r
now(tz = "America/Los_Angeles")
## [1] "2021-08-31 03:03:07 PDT"
```

---
# Date and time: `ymd_hms()`
&lt;br&gt;&lt;br&gt;


```r
ymd_hms("2020-03-31 10:05:30", 
        tz = "Australia/Melbourne")
## [1] "2020-03-31 10:05:30 AEDT"
```



```r
ymd_hms("2020-03-31 10:05:30", 
        tz = "America/Los_Angeles")
## [1] "2020-03-31 10:05:30 PDT"
```
&lt;br&gt;

.green[year, month, day, hour, minutes, seconds]


---
# Extracting temporal elements

&lt;br&gt;&lt;br&gt;

- Very often we want to know what day of the week it is
- Trends and patterns in data can be quite different depending on the type of day:
.content-box-neutral[
  - week day vs. weekend
  - weekday vs. holiday
  - regular saturday night vs. new years eve 
]

---
# Many ways of saying similar things
&lt;br&gt;&lt;br&gt;
- Many ways to specify day of the week:
  - A number. .green[Does 1 mean... Sunday, Monday or even Saturday???]
  - Or text or or abbreviated text. .green[(Mon vs. Monday)]

- Talking with people we generally use.green[day name]:
  - Today is Friday, tomorrow is Saturday vs Today is 5 and tomorrow is 6.
- But, .green[doing data analysis on days might be useful to have it represented as a number]:
  - e.g., Saturday - Thursday is 2 days (6 - 4)

---
# The Many ways to say Monday 
&lt;br&gt;

```r
wday("2019-08-12")
## [1] 2
wday("2019-08-12", label = TRUE)
## [1] Mon
## Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat
```


```r
wday("2019-08-12", label = TRUE, abbr = FALSE)
## [1] Monday
## 7 Levels: Sunday &lt; Monday &lt; Tuesday &lt; Wednesday &lt; Thursday &lt; ... &lt; Saturday
wday("2019-08-12", label = TRUE, week_start = 1)
## [1] Mon
## Levels: Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat &lt; Sun
```
- .purple[label = TRUE] --&gt; .green[adds day name &amp; turns output into a factor]
- .purple[abbr = FALSE] --&gt; .green[abbreviation = FALSE then we get full day name]
- .purple[week_start = 1] --&gt; .green[Week starts on Monday]

---
# Similarly, we can extract what month the day is in.
&lt;br&gt;&lt;br&gt;

```r
month("2020-03-31")
## [1] 3
month("2020-03-31", label = TRUE)
## [1] Mar
## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec
month("2020-03-31", label = TRUE, abbr = FALSE)
## [1] March
## 12 Levels: January &lt; February &lt; March &lt; April &lt; May &lt; June &lt; ... &lt; December
```

---
# Fiscally, it is useful to know what quarter the day is in.
&lt;br&gt;&lt;br&gt;

```r
quarter("2020-03-31")
## [1] 1
semester("2020-03-31")
## [1] 1
```

---
# Which day is it?
&lt;br&gt;&lt;br&gt;

```r
yday("2020-03-31")
## [1] 91
```

---
# Melbourne pedestrian sensor portal
&lt;br&gt;&lt;br&gt;
.pull-left[
&lt;img src="images/sensors.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.pull-right[

- Contains hourly counts of people walking around the city. 
- Extract records for 2020 for the sensor at Melbourne Central
- Use .green[lubridate to extract different temporal components], so we can study the pedestrian patterns at this location. 

]

[Melbourne pedestrian sensor portal](http://www.pedestrian.melbourne.vic.gov.au/):

---
# Getting pedestrian count data with rwalkr

```r
library(rwalkr)
walk_all &lt;- melb_walk_fast(year = 2020)

walk &lt;- walk_all %&gt;% filter(Sensor == "Melbourne Central")
walk
```



```
## # A tibble: 306,780 × 6
##     ...1 Sensor                       Date_Time           Date        Time Count
##    &lt;dbl&gt; &lt;chr&gt;                        &lt;dttm&gt;              &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;
##  1     1 231 Bourke St                2020-01-01 00:00:00 2020-01-01     0    NA
##  2     2 Alfred Place                 2020-01-01 00:00:00 2020-01-01     0   336
##  3     3 Birrarung Marr               2020-01-01 00:00:00 2020-01-01     0  2944
##  4     4 Bourke St - Spencer St (Nor… 2020-01-01 00:00:00 2020-01-01     0  1323
##  5     5 Bourke St Bridge             2020-01-01 00:00:00 2020-01-01     0  2440
##  6     6 Bourke St-Russell St (West)  2020-01-01 00:00:00 2020-01-01     0  2070
##  7     7 Bourke Street Mall (North)   2020-01-01 00:00:00 2020-01-01     0  1012
##  8     8 Bourke Street Mall (South)   2020-01-01 00:00:00 2020-01-01     0   725
##  9     9 Chinatown-Lt Bourke St (Sou… 2020-01-01 00:00:00 2020-01-01     0  1014
## 10    10 Chinatown-Swanston St (Nort… 2020-01-01 00:00:00 2020-01-01     0   657
## # … with 306,770 more rows
```



---
# Let's think about the data structure.

.left-code[

- The .green[basic time unit is hour of the day]. 
- Date can be decomposed into 
.content-box-neutral[
    - month
    - week day vs weekend
    - week of the year
    - day of the month
    - holiday or work day
 ]   
]

.right-plot[

![](images/Time.png)
]


---
# What format is walk in?


```r
walk
## # A tibble: 306,780 × 6
##     ...1 Sensor                       Date_Time           Date        Time Count
##    &lt;dbl&gt; &lt;chr&gt;                        &lt;dttm&gt;              &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;
##  1     1 231 Bourke St                2020-01-01 00:00:00 2020-01-01     0    NA
##  2     2 Alfred Place                 2020-01-01 00:00:00 2020-01-01     0   336
##  3     3 Birrarung Marr               2020-01-01 00:00:00 2020-01-01     0  2944
##  4     4 Bourke St - Spencer St (Nor… 2020-01-01 00:00:00 2020-01-01     0  1323
##  5     5 Bourke St Bridge             2020-01-01 00:00:00 2020-01-01     0  2440
##  6     6 Bourke St-Russell St (West)  2020-01-01 00:00:00 2020-01-01     0  2070
##  7     7 Bourke Street Mall (North)   2020-01-01 00:00:00 2020-01-01     0  1012
##  8     8 Bourke Street Mall (South)   2020-01-01 00:00:00 2020-01-01     0   725
##  9     9 Chinatown-Lt Bourke St (Sou… 2020-01-01 00:00:00 2020-01-01     0  1014
## 10    10 Chinatown-Swanston St (Nort… 2020-01-01 00:00:00 2020-01-01     0   657
## # … with 306,770 more rows
```

It is a data frame (tibble) --&gt; .green[it is an R object where we store data]
---
# Add month and weekday information


```r

walk_tidy &lt;- walk %&gt;%
  dplyr::filter(Sensor == "State Library") %&gt;%
  mutate(month = month(Date,  label = TRUE, abbr = TRUE), 
         wday = wday(Date, label = TRUE, abbr = TRUE, week_start = 1))
head(walk_tidy,4)
## # A tibble: 4 × 8
##    ...1 Sensor        Date_Time           Date        Time Count month wday 
##   &lt;dbl&gt; &lt;chr&gt;         &lt;dttm&gt;              &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;ord&gt; &lt;ord&gt;
## 1    50 State Library 2020-01-01 00:00:00 2020-01-01     0  1578 Jan   Wed  
## 2   110 State Library 2020-01-01 01:00:00 2020-01-01     1  1856 Jan   Wed  
## 3   170 State Library 2020-01-01 02:00:00 2020-01-01     2   888 Jan   Wed  
## 4   230 State Library 2020-01-01 03:00:00 2020-01-01     3   352 Jan   Wed
```
&lt;br&gt;
- .green[We use] .purple[mutate] .green[to create two new variables]
- .green[We extract the month data from the Date variable] --&gt; .purple[month]
- .green[We extract the day of the week from the Date variable] --&gt; .purple[wday]


---
# Pedestrian count per month
&lt;br&gt;&lt;br&gt;
.left-code[

```r
ggplot(walk_tidy,
       aes(x = month, 
           y = Count)) + 
  geom_col()
```

.purple[geom_col] --&gt; .green[counts the number of cases at each position (x-axis)]
]

.right-plot[

&lt;img src="Workshop1-Week3_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]



---
# Pedestrian count per weekday
&lt;br&gt;&lt;br&gt;
.left-code[

```r
ggplot(walk_tidy,
       aes(x = wday,
           y = Count)) + 
  geom_col()
```
]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]



---
# What might be wrong with these interpretations?
&lt;br&gt;&lt;br&gt;
- There might be a .green[different number of days of the week over the year].
- This means that .green[simply summing the counts might lead to a misinterpretation of pedestrian patterns]. 
- Similarly, .green[months have different numbers of days].



---
# What are the number of pedestrians per day?


```r
walk_tidy
## # A tibble: 5,113 × 8
##     ...1 Sensor        Date_Time           Date        Time Count month wday 
##    &lt;dbl&gt; &lt;chr&gt;         &lt;dttm&gt;              &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;ord&gt; &lt;ord&gt;
##  1    50 State Library 2020-01-01 00:00:00 2020-01-01     0  1578 Jan   Wed  
##  2   110 State Library 2020-01-01 01:00:00 2020-01-01     1  1856 Jan   Wed  
##  3   170 State Library 2020-01-01 02:00:00 2020-01-01     2   888 Jan   Wed  
##  4   230 State Library 2020-01-01 03:00:00 2020-01-01     3   352 Jan   Wed  
##  5   290 State Library 2020-01-01 04:00:00 2020-01-01     4   182 Jan   Wed  
##  6   350 State Library 2020-01-01 05:00:00 2020-01-01     5    78 Jan   Wed  
##  7   410 State Library 2020-01-01 06:00:00 2020-01-01     6    59 Jan   Wed  
##  8   470 State Library 2020-01-01 07:00:00 2020-01-01     7    58 Jan   Wed  
##  9   530 State Library 2020-01-01 08:00:00 2020-01-01     8   108 Jan   Wed  
## 10   590 State Library 2020-01-01 09:00:00 2020-01-01     9   188 Jan   Wed  
## # … with 5,103 more rows
```

---
# What are the number of pedestrians per day?



```r
walk_day &lt;- walk_tidy %&gt;% 
  group_by(Date) %&gt;%
  summarise(day_count = sum(Count, na.rm = TRUE))

walk_day
## # A tibble: 213 × 2
##    Date       day_count
##    &lt;date&gt;         &lt;dbl&gt;
##  1 2020-01-01     17312
##  2 2020-01-02     19032
##  3 2020-01-03     16247
##  4 2020-01-04     16568
##  5 2020-01-05     13998
##  6 2020-01-06     16028
##  7 2020-01-07     18096
##  8 2020-01-08     18532
##  9 2020-01-09     17098
## 10 2020-01-10     21696
## # … with 203 more rows
```





---
# What are the mean number of people per weekday?


```r
walk_week_day &lt;- walk_day %&gt;%
* mutate(wday = wday(Date, label = TRUE, abbr = TRUE, week_start = 1)) %&gt;%
* group_by(wday) %&gt;%
* summarise(m = mean(day_count, na.rm = TRUE),
            s = sd(day_count, na.rm = TRUE))

head(walk_week_day, 5)
## # A tibble: 5 × 3
##   wday       m     s
##   &lt;ord&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 Mon    9174. 7230.
## 2 Tue    9647. 7607.
## 3 Wed   10060. 7600.
## 4 Thu    9590. 8049.
## 5 Fri   10453. 8299.
```

---
# What are the mean number of people per weekday?
&lt;br&gt;&lt;br&gt;

```r
ggplot(walk_week_day) + 
  geom_errorbar(aes(x = wday, ymin = m - s, ymax = m + s)) +
  labs(x = "Day of week", 
       y = "Average number of pedestrians")
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-walk-day-1.png" width="576" style="display: block; margin: auto;" /&gt;

---
class: transition
# Distribution of counts
&lt;br&gt;&lt;br&gt;
Side-by-side boxplots show the distribution of counts over different temporal elements.

A [boxplot](https://ggplot2.tidyverse.org/reference/geom_boxplot.html#:~:text=geom_boxplot.Rd,all%20%22outlying%22%20points%20individually.) displays the so called five number summary of a data set: .green[min, first quartile, median, third quartile and max, the whiskers represent 1.5*IQR (interquantile range = 75th quantile - 25th quantile)]

Let's look at it in detail!

---
# Boxplot

&lt;img src="images/boxplot.jpg" width="80%" style="display: block; margin: auto;" /&gt;


---
# Boxplot and data distribution

&lt;img src="images/bp_datadistribution.jpg" width="80%" style="display: block; margin: auto;" /&gt;

---
# Hour of the day
&lt;br&gt;&lt;br&gt;

```r
ggplot(walk_tidy,
       aes(x = as.factor(Time), y = Count)) + 
  geom_boxplot()
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-time-count-1.png" width="576" style="display: block; margin: auto;" /&gt;

---
# Day of the week
&lt;br&gt;

```r
walk_tidy &lt;- walk_tidy %&gt;%
mutate(wday = wday(Date, label = TRUE, abbr = TRUE, week_start = 1))
```


```r


ggplot(walk_tidy,
       aes(x = wday,
           y = Count)) +
  geom_boxplot()
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-walk-weekday-count-1.png" width="576" style="display: block; margin: auto;" /&gt;

---
# Month
&lt;br&gt;

```r
walk_tidy &lt;- walk_tidy %&gt;%
  mutate(month = month(Date, label = TRUE)) 
```



```r
ggplot(walk_tidy,
       aes(x = month, 
           y = Count)) + 
  geom_boxplot()
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-month-count-boxplot-1.png" width="576" style="display: block; margin: auto;" /&gt;

---
# Time series plots

## Lines show consecutive hours of the day


```r
ggplot(walk_tidy, aes(x = Time, y = Count, group = Date)) + 
  geom_line()
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-time-count-line-1.png" width="576" style="display: block; margin: auto;" /&gt;

---
# By month


```r
ggplot(walk_tidy, aes(x = Time, y = Count, group = Date)) +
  geom_line() +
  facet_wrap( ~ month)
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-time-count-by-date-1.png" width="576" style="display: block; margin: auto;" /&gt;

---
# By week day


```r
ggplot(walk_tidy, aes(x = Time, y = Count, group = Date)) +
  geom_line() +
  facet_grid(month ~ wday)
```

&lt;img src="Workshop1-Week3_files/figure-html/gg-time-count-line-facet-grid-1.png" width="1008" style="display: block; margin: auto;" /&gt;

---
# Calendar plots (this is a bit more advanced)

.left-code[

```r
library(sugrrants)

walk_tidy_calendar &lt;- 
  frame_calendar(walk_tidy,
                 x = Time, 
                 y = Count, 
                 date = Date, 
                 nrow = 4)

p1 &lt;- ggplot(walk_tidy_calendar,
*      aes(x = .Time,
*          y = .Count,
           group = Date)) +
  geom_line()

prettify(p1)
```
]

.right-plot[
&lt;img src="Workshop1-Week3_files/figure-html/calendar-plot-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

*.Time* is mapped to the x and y axes respectively group by *Date*
---
# Holidays

&lt;br&gt;&lt;br&gt;
- You will also learn how to plot a 
holiday calendar in the workshop on Friday using:

  - suggrants
  - tsibble
  - lubridate
  - dplyr
  - timeDate
  - rwalkr
  
  [For more info on calendar plots here](https://pkg.earo.me/sugrrants/articles/frame-calendar.html)
  
---
# Assignment 1
&lt;br&gt;&lt;br&gt;

.content-box-neutral[
- It is available on Moodle
- Please read the announcement
- Info about how to submit an assignment in Moodle [here](https://guides.lib.monash.edu/moodle/assignments)
- **Go over assignment instructions and make sure you submit all the necessary files**
- Assignment must be completed on Rstudio Cloud
- Due date **5pm, March 26**. Make sure you submit on time! 
- **.red[LATE SUBMISSIONS WILL NOT BE CONSIDERED]**
]

.green[It is a great opportunity to learn, enjoy it!]
  

---




background-image: url(images/daniel-olah-pCcGpVsOHoo-unsplash.jpg)
background-size: cover
class: hide-slide-number split-70
count: false

.column.shade_black[.content[

&lt;br&gt;&lt;br&gt;



.bottom_abs.width100[

Lecturer: Patricia Menéndez

Department of Econometrics and Business Statistics&lt;br&gt;





]

&lt;br /&gt;
This work is licensed under a &lt;a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"&gt;Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License&lt;/a&gt;.

&lt;a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"&gt;&lt;img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /&gt;&lt;/a&gt;


]]



&lt;div class="column transition monash-m-new delay-1s" style="clip-path:url(#swipe__clip-path);"&gt;
&lt;div class="background-image" style="background-image:url('images/large.png');background-position: center;background-size:cover;margin-left:3px;"&gt;
&lt;svg class="clip-svg absolute"&gt;
&lt;defs&gt;
&lt;clipPath id="swipe__clip-path" clipPathUnits="objectBoundingBox"&gt;
&lt;polygon points="0.5745 0, 0.5 0.33, 0.42 0, 0 0, 0 1, 0.27 1, 0.27 0.59, 0.37 1, 0.634 1, 0.736 0.59, 0.736 1, 1 1, 1 0, 0.5745 0" /&gt;
&lt;/clipPath&gt;
&lt;/defs&gt;	
&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLanguage": "r",
"highlightLines": true,
"highlightSpans": false,
"countIncrementalSlides": false,
"slideNumberFormat": "%current%/%total%",
"navigation": {
"scroll": false,
"touch": true,
"click": false
},
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'assets/mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
